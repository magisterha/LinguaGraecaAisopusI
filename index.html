<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fábula de Esopo: El Águila, el Grajo y el Pastor</title>
    
    <style type="text/css">
        /* --- Tailwind CSS Pre-compilado (Preflight & Utilitarios Usados) --- */
        *,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::before,::after{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type='button'],[type='reset'],[type='submit']{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type='search']{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button, [role="button"]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}
        .mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-10{margin-bottom:2.5rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.my-6{margin-top:1.5rem;margin-bottom:1.5rem}
        .block{display:block}.h-screen{height:100vh}.w-80{width:20rem}
        .overflow-y-auto{overflow-y:auto}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}
        .border-b-2{border-bottom-width:2px}.border-stone-300{--tw-border-opacity:1;border-color:rgb(214 211 209 / var(--tw-border-opacity))}
        .bg-stone-100{--tw-bg-opacity:1;background-color:rgb(245 245 244 / var(--tw-bg-opacity))}
        .bg-stone-200{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity))}
        .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}
        .p-1{padding:0.25rem}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.pb-5{padding-bottom:1.25rem}
        .text-center{text-align:center}.text-justify{text-align:justify}
        .text-2xl{font-size:1.5rem;line-height:2rem}.text-5xl{font-size:3rem;line-height:1}
        .text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}
        .font-bold{font-weight:700}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.leading-relaxed{line-height:1.625}.tracking-wider{letter-spacing:0.05em}
        .text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))}
        .text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity))}
        .text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity))}
        .text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity))}
        .shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}
        .shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}
        .transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;-webkit-backdrop-filter:backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}
        .space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}
        .space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}
        @media (min-width:1024px){.lg\:p-12{padding:3rem}}

        /* --- Estilos Personalizados --- */
        body{background-color:#f3f0e9;font-family:'Helvetica Neue',Arial,sans-serif;color:#4a4a4a}
        .textum-classicum{font-family:'Georgia','Times New Roman',serif}
        .verbum{cursor:pointer;transition:background-color .2s ease-in-out, box-shadow .2s ease-in-out; border-radius: 0.25rem; padding: 0 0.1rem;}
        .verbum:hover{background-color:#ede6d6}
        .activus{background-color:#cbbca7!important;font-weight:700}
        
        /* --- ESTILOS PARA EL SELECTOR DE IDIOMA --- */
        #language-switcher { display: flex; gap: 0.5rem; border-bottom: 1px solid #e5e7eb; padding-bottom: 1rem; }
        .lang-btn { flex-grow: 1; padding: 0.5rem; border: 1px solid #d6d3d1; background-color: #f5f5f4; color: #57534e; border-radius: 0.375rem; cursor: pointer; font-weight: 600; transition: background-color 0.2s, color 0.2s; font-size: 0.875rem;}
        .lang-btn:hover { background-color: #e7e5e4; }
        .lang-btn.active-lang { background-color: #4a4a4a; color: #ffffff; border-color: #4a4a4a; }
        
        /* --- LAYOUT RESPONSIVO (Móvil Primero) --- */
        .main-layout { padding: 1rem; padding-bottom: calc(45vh + 2rem); }
        #marginalia-sinistra { position: fixed; bottom: 0; left: 0; right: 0; width: 100%; height: 45vh; z-index: 50; border-top: 2px solid #d6d3d1; box-shadow: 0 -4px 10px rgba(0,0,0,0.1); transform: translateY(0); transition: transform 0.3s ease-in-out; }
        
        @media (min-width: 1024px) {
            .main-layout { display: grid; grid-template-columns: 24rem 1fr; gap: 2rem; padding: 2rem; }
            #marginalia-sinistra { position: sticky; top: 2rem; bottom: auto; left: auto; right: auto; height: calc(100vh - 4rem); width: auto; border-top: none; box-shadow: var(--tw-shadow-xl); }
        }
    </style>
</head>
<body class="bg-stone-100">

    <div class="main-layout">
        <main>
            <header class="text-center mb-10 border-b-2 border-stone-300 pb-5">
                <h1 class="text-5xl textum-classicum text-gray-800">ΑΕΤΟΣ ΚΑΙ ΚΟΛΟΙΟΣ ΚΑΙ ΠΟΙΜΗΝ</h1>
                <h2 class="text-2xl text-gray-600 mt-2">The Eagle, the Jackdaw, and the Shepherd</h2>
            </header>
            
            <div id="paragrafus-contentus" class="textum-classicum text-xl leading-relaxed text-justify bg-white p-8 lg:p-12 rounded-lg shadow-lg"></div>
            
            <footer class="text-center mt-6 text-sm text-gray-500">
                <p><i>Click a word to see its analysis and the sentence translation.</i></p>
            </footer>
        </main>

        <aside id="marginalia-sinistra" class="bg-white p-6 rounded-t-lg lg:rounded-lg overflow-y-auto">
            <div id="language-switcher" class="mb-4">
                <button data-lang="en" class="lang-btn active-lang">English</button>
                <button data-lang="es" class="lang-btn">Español</button>
                <button data-lang="zh" class="lang-btn">中文 (繁體)</button>
            </div>
            <div id="marginalia-contentus"></div>
        </aside>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // =========================================================================================
        // === INICIO DE LA ZONA DE DATOS ===
        // =========================================================================================
        const paragrafus = {
            id: 1,
            orationes: [
                {
                    id_orationis: 'o1',
                    textus_latinus: "ἀετὸς καταπτὰς ἀπό τινος ὑψηλῆς πέτρας ἄρνα ἥρπασε·",
                    translationes: { 
                        en: '<strong>English</strong>: An eagle, flying down from a high rock, snatched a lamb.',
                        es: '<strong>Español</strong>: Un águila, descendiendo desde una alta roca, arrebató un cordero.', 
                        zh: '<strong>中文（繁體）</strong>: 一隻老鷹從一塊高高的岩石上俯衝下來，抓住了一隻羔羊。'
                    },
                    verba: [
                        { id_verbi: 'v1_1', terminus: 'ἀετὸς', analysis_morphologicus_en: 'Noun: nominative masculine singular.', analysis_morphologicus: 'Sustantivo: nominativo masculino singular.', analysis_morphologicus_zh: '名詞：主格、陽性、單數。', significationes: { en: 'eagle', es: 'águila', zh: '老鷹' } },
                        { id_verbi: 'v1_2', terminus: 'καταπτὰς', analysis_morphologicus_en: 'Aorist active participle: nominative masculine singular from καταπέτομαι.', analysis_morphologicus: 'Participio de aoristo activo: nominativo masculino singular de καταπέτομαι.', analysis_morphologicus_zh: '不定過去時主動分詞：主格、陽性、單數，來自 καταπέτομαι。', significationes: { en: 'flying down, having flown down', es: 'descendiendo, habiendo descendido', zh: '俯衝下來' } },
                        { id_verbi: 'v1_3', terminus: 'ἀπό', analysis_morphologicus_en: 'Preposition (takes genitive).', analysis_morphologicus: 'Preposición de genitivo.', analysis_morphologicus_zh: '介詞（搭配屬格）。', significationes: { en: 'from', es: 'desde, de', zh: '從' } },
                        { id_verbi: 'v1_4', terminus: 'τινος', analysis_morphologicus_en: 'Indefinite pronoun: genitive feminine singular from τις.', analysis_morphologicus: 'Pronombre indefinido: genitivo femenino singular de τις.', analysis_morphologicus_zh: '不定代名詞：屬格、陰性、單數，來自 τις。', significationes: { en: 'a certain, some', es: 'una cierta, alguna', zh: '某一個' } },
                        { id_verbi: 'v1_5', terminus: 'ὑψηλῆς', analysis_morphologicus_en: 'Adjective: genitive feminine singular.', analysis_morphologicus: 'Adjetivo: genitivo femenino singular.', analysis_morphologicus_zh: '形容詞：屬格、陰性、單數。', significationes: { en: 'high', es: 'alta', zh: '高的' } },
                        { id_verbi: 'v1_6', terminus: 'πέτρας', analysis_morphologicus_en: 'Noun: genitive feminine singular.', analysis_morphologicus: 'Sustantivo: genitivo femenino singular.', analysis_morphologicus_zh: '名詞：屬格、陰性、單數。', significationes: { en: 'rock', es: 'roca', zh: '岩石' } },
                        { id_verbi: 'v1_7', terminus: 'ἄρνα', analysis_morphologicus_en: 'Noun: accusative masculine/feminine singular.', analysis_morphologicus: 'Sustantivo: acusativo masculino/femenino singular.', analysis_morphologicus_zh: '名詞：賓格、陽/陰性、單數。', significationes: { en: 'lamb', es: 'cordero', zh: '羔羊' } },
                        { id_verbi: 'v1_8', terminus: 'ἥρπασε', analysis_morphologicus_en: 'Verb: 3rd person singular, aorist active indicative from ἁρπάζω.', analysis_morphologicus: 'Verbo: 3ª persona del singular del aoristo de indicativo activo de ἁρπάζω.', analysis_morphologicus_zh: '動詞：不定過去時、直陳語氣、主動語態、第三人稱單數，來自 ἁρπάζω。', significationes: { en: 'snatched', es: 'arrebató', zh: '抓住' } }
                    ]
                },
                {
                    id_orationis: 'o2',
                    textus_latinus: "κολοιὸς δὲ τοῦτον θεασάμενος διὰ ζῆλον μιμήσασθαι ἤθελε.",
                    translationes: { 
                        en: '<strong>English</strong>: A jackdaw, seeing him, wanted to imitate him out of jealousy.',
                        es: '<strong>Español</strong>: Un grajo, habiéndolo visto, por envidia quiso imitarlo.', 
                        zh: '<strong>中文（繁體）</strong>: 一隻寒鴉看見了，出於嫉妒，也想模仿牠。'
                    },
                    verba: [
                        { id_verbi: 'v2_1', terminus: 'κολοιὸς', analysis_morphologicus_en: 'Noun: nominative masculine singular.', analysis_morphologicus: 'Sustantivo: nominativo masculino singular.', analysis_morphologicus_zh: '名詞：主格、陽性、單數。', significationes: { en: 'jackdaw', es: 'grajo', zh: '寒鴉' } },
                        { id_verbi: 'v2_2', terminus: 'δὲ', analysis_morphologicus_en: 'Postpositive conjunction.', analysis_morphologicus: 'Conjunción postpositiva.', analysis_morphologicus_zh: '後置連接詞。', significationes: { en: 'but, and', es: 'pero, y', zh: '而，但是' } },
                        { id_verbi: 'v2_3', terminus: 'τοῦτον', analysis_morphologicus_en: 'Demonstrative pronoun: accusative masculine singular.', analysis_morphologicus: 'Pronombre demostrativo: acusativo masculino singular.', analysis_morphologicus_zh: '指示代名詞：賓格、陽性、單數。', significationes: { en: 'this one, him', es: 'a este', zh: '這個' } },
                        { id_verbi: 'v2_4', terminus: 'θεασάμενος', analysis_morphologicus_en: 'Aorist middle participle: nominative masculine singular from θεάομαι.', analysis_morphologicus: 'Participio de aoristo medio: nominativo masculino singular de θεάομαι.', analysis_morphologicus_zh: '不定過去時中間語態分詞：主格、陽性、單數，來自 θεάομαι。', significationes: { en: 'having seen', es: 'habiendo visto', zh: '看見之後' } },
                        { id_verbi: 'v2_5', terminus: 'διὰ', analysis_morphologicus_en: 'Preposition (takes accusative).', analysis_morphologicus: 'Preposición de acusativo.', analysis_morphologicus_zh: '介詞（搭配賓格）。', significationes: { en: 'on account of, because of', es: 'a causa de, por', zh: '因為' } },
                        { id_verbi: 'v2_6', terminus: 'ζῆλον', analysis_morphologicus_en: 'Noun: accusative masculine singular.', analysis_morphologicus: 'Sustantivo: acusativo masculino singular.', analysis_morphologicus_zh: '名詞：賓格、陽性、單數。', significationes: { en: 'jealousy, zeal', es: 'celo, envidia', zh: '嫉妒' } },
                        { id_verbi: 'v2_7', terminus: 'μιμήσασθαι', analysis_morphologicus_en: 'Aorist middle infinitive from μιμέομαι.', analysis_morphologicus: 'Infinitivo de aoristo medio de μιμέομαι.', analysis_morphologicus_zh: '不定過去時中間語態不定式，來自 μιμέομαι。', significationes: { en: 'to imitate', es: 'imitar', zh: '模仿' } },
                        { id_verbi: 'v2_8', terminus: 'ἤθελε', analysis_morphologicus_en: 'Verb: 3rd person singular, imperfect active indicative from ἐθέλω.', analysis_morphologicus: 'Verbo: 3ª persona del singular del imperfecto de indicativo activo de ἐθέλω.', analysis_morphologicus_zh: '動詞：未完成時、直陳語氣、主動語態、第三人稱單數，來自 ἐθέλω。', significationes: { en: 'wanted, wished', es: 'quería, deseaba', zh: '想要' } }
                    ]
                },
                {
                    id_orationis: 'o3',
                    textus_latinus: "καὶ δὴ καθεὶς ἑαυτὸν μετὰ πολλοῦ ῥοίζου ἐπὶ κριὸν ἠνέχθη.",
                    translationes: { 
                        en: '<strong>English</strong>: And so, letting himself down with a great rushing sound, he was carried upon a ram.',
                        es: '<strong>Español</strong>: Y en efecto, lanzándose con gran estrépito, se precipitó sobre un carnero.', 
                        zh: '<strong>中文（繁體）</strong>: 於是，牠發出巨大的呼嘯聲，猛撲向一隻公羊。'
                    },
                    verba: [
                        { id_verbi: 'v3_1', terminus: 'καὶ', analysis_morphologicus_en: 'Conjunction.', analysis_morphologicus: 'Conjunción.', analysis_morphologicus_zh: '連接詞。', significationes: { en: 'and', es: 'y', zh: '並且' } },
                        { id_verbi: 'v3_2', terminus: 'δὴ', analysis_morphologicus_en: 'Emphatic particle.', analysis_morphologicus: 'Partícula enfática.', analysis_morphologicus_zh: '強調質詞。', significationes: { en: 'indeed, so', es: 'ciertamente, en efecto', zh: '確實，於是' } },
                        { id_verbi: 'v3_3', terminus: 'καθεὶς', analysis_morphologicus_en: 'Aorist active participle: nominative masculine singular from καθίημι.', analysis_morphologicus: 'Participio de aoristo activo: nominativo masculino singular de καθίημι.', analysis_morphologicus_zh: '不定過去時主動分詞：主格、陽性、單數，來自 καθίημι。', significationes: { en: 'letting down, swooping', es: 'lanzándose', zh: '猛撲' } },
                        { id_verbi: 'v3_4', terminus: 'ἑαυτὸν', analysis_morphologicus_en: 'Reflexive pronoun: accusative masculine singular.', analysis_morphologicus: 'Pronombre reflexivo: acusativo masculino singular.', analysis_morphologicus_zh: '反身代名詞：賓格、陽性、單數。', significationes: { en: 'himself', es: 'a sí mismo', zh: '牠自己' } },
                        { id_verbi: 'v3_5', terminus: 'μετὰ', analysis_morphologicus_en: 'Preposition (takes genitive).', analysis_morphologicus: 'Preposición de genitivo.', analysis_morphologicus_zh: '介詞（搭配屬格）。', significationes: { en: 'with', es: 'con', zh: '伴隨著' } },
                        { id_verbi: 'v3_6', terminus: 'πολλοῦ', analysis_morphologicus_en: 'Adjective: genitive masculine singular.', analysis_morphologicus: 'Adjetivo: genitivo masculino singular.', analysis_morphologicus_zh: '形容詞：屬格、陽性、單數。', significationes: { en: 'much, great', es: 'mucho, gran', zh: '巨大的' } },
                        { id_verbi: 'v3_7', terminus: 'ῥοίζου', analysis_morphologicus_en: 'Noun: genitive masculine singular.', analysis_morphologicus: 'Sustantivo: genitivo masculino singular.', analysis_morphologicus_zh: '名詞：屬格、陽性、單數。', significationes: { en: 'whirring, rushing sound', es: 'zumbido, estrépito', zh: '呼嘯聲' } },
                        { id_verbi: 'v3_8', terminus: 'ἐπὶ', analysis_morphologicus_en: 'Preposition (takes accusative).', analysis_morphologicus: 'Preposición de acusativo.', analysis_morphologicus_zh: '介詞（搭配賓格）。', significationes: { en: 'upon, onto', es: 'sobre, hacia', zh: '向著' } },
                        { id_verbi: 'v3_9', terminus: 'κριὸν', analysis_morphologicus_en: 'Noun: accusative masculine singular.', analysis_morphologicus: 'Sustantivo: acusativo masculino singular.', analysis_morphologicus_zh: '名詞：賓格、陽性、單數。', significationes: { en: 'ram', es: 'carnero', zh: '公羊' } },
                        { id_verbi: 'v3_10', terminus: 'ἠνέχθη', analysis_morphologicus_en: 'Verb: 3rd person singular, aorist passive indicative from φέρω.', analysis_morphologicus: 'Verbo: 3ª persona del singular del aoristo de indicativo pasivo de φέρω.', analysis_morphologicus_zh: '動詞：不定過去時、直陳語氣、被動語態、第三人稱單數，來自 φέρω。', significationes: { en: 'he was carried, he rushed', es: 'se precipitó, fue llevado', zh: '被帶去，衝去' } }
                    ]
                },
                {
                    id_orationis: 'o4',
                    textus_latinus: "ἐμπαρέντων δὲ αὐτοῦ τῶν ὀνύχων τοῖς μαλλοῖς ἐξαρθῆναι μὴ δυνάμενος ἐπτερύσσετο, ἕως ὁ ποιμὴν τὸ γεγονὸς αἰσθόμενος προσδραμὼν συνέλαβεν αὐτὸν καὶ περικόψας αὐτοῦ τὰ ὀξύπτερα, ὡς ἑσπέρα κατέλαβε, τοῖς αὐτοῦ παισὶν ἐκόμισε.",
                    translationes: { 
                        en: '<strong>English</strong>: But when his claws became entangled in the wool, unable to fly away, he flapped his wings, until the shepherd, perceiving what had happened, ran up and captured him. After clipping his flight feathers, when evening came, he brought him to his children.',
                        es: '<strong>Español</strong>: Pero al enredársele las garras en la lana, sin poder levantar el vuelo, aleteaba, hasta que el pastor, dándose cuenta de lo sucedido, corriendo hacia él lo capturó y, tras cortarle las plumas de las alas, cuando llegó la tarde, se lo llevó a sus hijos.', 
                        zh: '<strong>中文（繁體）</strong>: 但牠的爪子纏在了羊毛裡，無法飛起，只能不斷拍打翅膀，直到牧羊人注意到發生的事，跑過來抓住了牠。牧羊人剪掉了牠的飛羽，等到傍晚時，把牠帶給了自己的孩子們。'
                    },
                    verba: [
                        { id_verbi: 'v4_1', terminus: 'ἐμπαρέντων', analysis_morphologicus_en: 'Aorist passive participle: genitive masculine plural from ἐμπείρω (genitive absolute).', analysis_morphologicus: 'Participio de aoristo pasivo: genitivo masculino plural de ἐμπείρω (en genitivo absoluto).', analysis_morphologicus_zh: '不定過去時被動分詞：屬格、陽性、複數，來自 ἐμπείρω (用於屬格獨立結構)。', significationes: { en: 'having been entangled', es: 'habiendo sido enredadas', zh: '被纏住' } },
                        { id_verbi: 'v4_3', terminus: 'ὀνύχων', analysis_morphologicus_en: 'Noun: genitive masculine plural.', analysis_morphologicus: 'Sustantivo: genitivo masculino plural.', analysis_morphologicus_zh: '名詞：屬格、陽性、複數。', significationes: { en: 'of the claws', es: 'de las garras', zh: '爪子' } },
                        { id_verbi: 'v4_5', terminus: 'μαλλοῖς', analysis_morphologicus_en: 'Noun: dative masculine plural.', analysis_morphologicus: 'Sustantivo: dativo masculino plural.', analysis_morphologicus_zh: '名詞：與格、陽性、複數。', significationes: { en: 'in the wool', es: 'en la lana', zh: '在羊毛裡' } },
                        { id_verbi: 'v4_6', terminus: 'ἐξαρθῆναι', analysis_morphologicus_en: 'Aorist passive infinitive from ἐξαίρω.', analysis_morphologicus: 'Infinitivo de aoristo pasivo de ἐξαίρω.', analysis_morphologicus_zh: '不定過去時被動不定式，來自 ἐξαίρω。', significationes: { en: 'to be lifted up, to fly away', es: 'levantar el vuelo', zh: '飛起' } },
                        { id_verbi: 'v4_7', terminus: 'μὴ', analysis_morphologicus_en: 'Negative particle.', analysis_morphologicus: 'Partícula negativa.', analysis_morphologicus_zh: '否定質詞。', significationes: { en: 'not', es: 'no', zh: '不' } },
                        { id_verbi: 'v4_8', terminus: 'δυνάμενος', analysis_morphologicus_en: 'Present middle participle: nominative masculine singular from δύναμαι.', analysis_morphologicus: 'Participio de presente medio: nominativo masculino singular de δύναμαι.', analysis_morphologicus_zh: '現在時中間語態分詞：主格、陽性、單數，來自 δύναμαι。', significationes: { en: 'being able', es: 'pudiendo', zh: '能夠' } },
                        { id_verbi: 'v4_9', terminus: 'ἐπτερύσσετο', analysis_morphologicus_en: 'Verb: 3rd person singular, imperfect middle indicative from πτερύσσω.', analysis_morphologicus: 'Verbo: 3ª persona del singular del imperfecto de indicativo medio de πτερύσσω.', analysis_morphologicus_zh: '動詞：未完成時、直陳語氣、中間語態、第三人稱單數，來自 πτερύσσω。', significationes: { en: 'he flapped his wings', es: 'aleteaba', zh: '拍打翅膀' } },
                        { id_verbi: 'v4_10', terminus: 'ἕως', analysis_morphologicus_en: 'Temporal conjunction.', analysis_morphologicus: 'Conjunción temporal.', analysis_morphologicus_zh: '時間連接詞。', significationes: { en: 'until', es: 'hasta que', zh: '直到' } },
                        { id_verbi: 'v4_12', terminus: 'ποιμὴν', analysis_morphologicus_en: 'Noun: nominative masculine singular.', analysis_morphologicus: 'Sustantivo: nominativo masculino singular.', analysis_morphologicus_zh: '名詞：主格、陽性、單數。', significationes: { en: 'shepherd', es: 'pastor', zh: '牧羊人' } },
                        { id_verbi: 'v4_13', terminus: 'γεγονὸς', analysis_morphologicus_en: 'Perfect active participle (substantive): accusative neuter singular from γίγνομαι.', analysis_morphologicus: 'Participio de perfecto activo sustantivado: acusativo neutro singular de γίγνομαι.', analysis_morphologicus_zh: '完成時主動分詞(名詞化)：賓格、中性、單數，來自 γίγνομαι。', significationes: { en: 'what had happened', es: 'lo sucedido', zh: '發生的事' } },
                        { id_verbi: 'v4_14', terminus: 'αἰσθόμενος', analysis_morphologicus_en: 'Aorist middle participle: nominative masculine singular from αἰσθάνομαι.', analysis_morphologicus: 'Participio de aoristo medio: nominativo masculino singular de αἰσθάνομαι.', analysis_morphologicus_zh: '不定過去時中間語態分詞：主格、陽性、單數，來自 αἰσθάνομαι。', significationes: { en: 'perceiving, noticing', es: 'dándose cuenta', zh: '注意到' } },
                        { id_verbi: 'v4_15', terminus: 'προσδραμὼν', analysis_morphologicus_en: 'Aorist active participle: nominative masculine singular from προστρέχω.', analysis_morphologicus: 'Participio de aoristo activo: nominativo masculino singular de προστρέχω.', analysis_morphologicus_zh: '不定過去時主動分詞：主格、陽性、單數，來自 προστρέχω。', significationes: { en: 'running up to', es: 'corriendo hacia', zh: '跑過去' } },
                        { id_verbi: 'v4_16', terminus: 'συνέλαβεν', analysis_morphologicus_en: 'Verb: 3rd person singular, aorist active indicative from συλλαμβάνω.', analysis_morphologicus: 'Verbo: 3ª persona del singular del aoristo de indicativo activo de συλλαμβάνω.', analysis_morphologicus_zh: '動詞：不定過去時、直陳語氣、主動語態、第三人稱單數，來自 συλλαμβάνω。', significationes: { en: 'captured', es: 'capturó', zh: '抓住' } },
                        { id_verbi: 'v4_17', terminus: 'αὐτὸν', analysis_morphologicus_en: 'Personal pronoun: accusative masculine singular.', analysis_morphologicus: 'Pronombre personal: acusativo masculino singular.', analysis_morphologicus_zh: '人稱代名詞：賓格、陽性、單數。', significationes: { en: 'him', es: 'lo, a él', zh: '牠' } },
                        { id_verbi: 'v4_18', terminus: 'περικόψας', analysis_morphologicus_en: 'Aorist active participle: nominative masculine singular from περικόπτω.', analysis_morphologicus: 'Participio de aoristo activo: nominativo masculino singular de περικόπτω.', analysis_morphologicus_zh: '不定過去時主動分詞：主格、陽性、單數，來自 περικόπτω。', significationes: { en: 'having clipped', es: 'habiendo cortado', zh: '剪掉之後' } },
                        { id_verbi: 'v4_19', terminus: 'αὐτοῦ', analysis_morphologicus_en: 'Personal pronoun: genitive masculine singular.', analysis_morphologicus: 'Pronombre personal: genitivo masculino singular.', analysis_morphologicus_zh: '人稱代名詞：屬格、陽性、單數。', significationes: { en: 'his', es: 'de él, sus', zh: '牠的' } },
                        { id_verbi: 'v4_20', terminus: 'ὀξύπτερα', analysis_morphologicus_en: 'Adjective (substantive): accusative neuter plural.', analysis_morphologicus: 'Adjetivo sustantivado: acusativo neutro plural.', analysis_morphologicus_zh: '形容詞(名詞化)：賓格、中性、複數。', significationes: { en: 'flight feathers', es: 'plumas de vuelo', zh: '飛羽' } },
                        { id_verbi: 'v4_21', terminus: 'ὡς', analysis_morphologicus_en: 'Temporal conjunction.', analysis_morphologicus: 'Conjunción temporal.', analysis_morphologicus_zh: '時間連接詞。', significationes: { en: 'when', es: 'cuando', zh: '當' } },
                        { id_verbi: 'v4_22', terminus: 'ἑσπέρα', analysis_morphologicus_en: 'Noun: nominative feminine singular.', analysis_morphologicus: 'Sustantivo: nominativo femenino singular.', analysis_morphologicus_zh: '名詞：主格、陰性、單數。', significationes: { en: 'evening', es: 'tarde, anochecer', zh: '傍晚' } },
                        { id_verbi: 'v4_23', terminus: 'κατέλαβε', analysis_morphologicus_en: 'Verb: 3rd person singular, aorist active indicative from καταλαμβάνω.', analysis_morphologicus: 'Verbo: 3ª persona del singular del aoristo de indicativo activo de καταλαμβάνω.', analysis_morphologicus_zh: '動詞：不定過去時、直陳語氣、主動語態、第三人稱單數，來自 καταλαμβάνω。', significationes: { en: 'arrived, overtook', es: 'llegó', zh: '來臨' } },
                        { id_verbi: 'v4_24', terminus: 'παισὶν', analysis_morphologicus_en: 'Noun: dative masculine plural.', analysis_morphologicus: 'Sustantivo: dativo masculino plural.', analysis_morphologicus_zh: '名詞：與格、陽性、複數。', significationes: { en: 'to his children', es: 'a sus hijos', zh: '給孩子們' } },
                        { id_verbi: 'v4_25', terminus: 'ἐκόμισε', analysis_morphologicus_en: 'Verb: 3rd person singular, aorist active indicative from κομίζω.', analysis_morphologicus: 'Verbo: 3ª persona del singular del aoristo de indicativo activo de κομίζω.', analysis_morphologicus_zh: '動詞：不定過去時、直陳語氣、主動語態、第三人稱單數，來自 κομίζω。', significationes: { en: 'brought', es: 'llevó', zh: '帶給' } }
                    ]
                },
                {
                    id_orationis: 'o5',
                    textus_latinus: "τῶν δὲ πυνθανομένων, τί εἴη τὸ ὄρνεον, ἔφη·",
                    translationes: { 
                        en: '<strong>English</strong>: And when they asked what kind of bird it was, he said:',
                        es: '<strong>Español</strong>: Y preguntándole ellos qué pájaro era, dijo:', 
                        zh: '<strong>中文（繁體）</strong>: 當他們問這是什麼鳥時，他說：'
                    },
                    verba: [
                        { id_verbi: 'v5_1', terminus: 'πυνθανομένων', analysis_morphologicus_en: 'Present middle participle (substantive): genitive masculine plural from πυνθάνομαι (genitive absolute).', analysis_morphologicus: 'Participio de presente medio sustantivado: genitivo masculino plural de πυνθάνομαι (en genitivo absoluto).', analysis_morphologicus_zh: '現在時中間語態分詞(名詞化)：屬格、陽性、複數，來自 πυνθάνομαι (用於屬格獨立結構)。', significationes: { en: 'of those asking, when they asked', es: 'de los que preguntaban', zh: '當他們問' } },
                        { id_verbi: 'v5_2', terminus: 'τί', analysis_morphologicus_en: 'Interrogative pronoun: nominative neuter singular.', analysis_morphologicus: 'Pronombre interrogativo: nominativo neutro singular.', analysis_morphologicus_zh: '疑問代名詞：主格、中性、單數。', significationes: { en: 'what', es: 'qué', zh: '什麼' } },
                        { id_verbi: 'v5_3', terminus: 'εἴη', analysis_morphologicus_en: 'Verb: 3rd person singular, present active optative from εἰμί.', analysis_morphologicus: 'Verbo: 3ª persona del singular del presente de optativo activo de εἰμί.', analysis_morphologicus_zh: '動詞：現在時、祈願語氣、主動語態、第三人稱單數，來自 εἰμί。', significationes: { en: 'it might be, it was', es: 'era, fuese', zh: '是' } },
                        { id_verbi: 'v5_4', terminus: 'ὄρνεον', analysis_morphologicus_en: 'Noun: nominative neuter singular.', analysis_morphologicus: 'Sustantivo: nominativo neutro singular.', analysis_morphologicus_zh: '名詞：主格、中性、單數。', significationes: { en: 'bird', es: 'pájaro', zh: '鳥' } },
                        { id_verbi: 'v5_5', terminus: 'ἔφη', analysis_morphologicus_en: 'Defective verb: 3rd person singular, imperfect active indicative from φημί.', analysis_morphologicus: 'Verbo defectivo: 3ª persona del singular del imperfecto de indicativo activo de φημί.', analysis_morphologicus_zh: '缺陷動詞：未完成時、直陳語氣、主動語態、第三人稱單數，來自 φημί。', significationes: { en: 'he said', es: 'dijo', zh: '說' } }
                    ]
                },
                {
                    id_orationis: 'o6',
                    textus_latinus: "ὡς μὲν ἐγὼ σαφῶς οἶδα, κολοιός, ὡς δὲ αὐτὸς βούλεται, ἀετός.",
                    translationes: { 
                        en: '<strong>English</strong>: "As far as I know for certain, a jackdaw; but as far as he himself wishes, an eagle."',
                        es: '<strong>Español</strong>: "Por lo que yo sé claramente, un grajo; pero por lo que él mismo quiere, un águila".', 
                        zh: '<strong>中文（繁體）</strong>: 「據我所知，是隻寒鴉；但據牠自己所願，是隻老鷹。」'
                    },
                    verba: [
                        { id_verbi: 'v6_1', terminus: 'ὡς', analysis_morphologicus_en: 'Adverb.', analysis_morphologicus: 'Adverbio.', analysis_morphologicus_zh: '副詞。', significationes: { en: 'as, so far as', es: 'como, en cuanto a', zh: '如同，就...而言' } },
                        { id_verbi: 'v6_2', terminus: 'μὲν', analysis_morphologicus_en: 'Postpositive particle (introduces a contrast).', analysis_morphologicus: 'Partícula postpositiva (introduce contraste).', analysis_morphologicus_zh: '後置質詞 (引出對比)。', significationes: { en: 'on the one hand', es: 'por una parte', zh: '一方面' } },
                        { id_verbi: 'v6_3', terminus: 'ἐγὼ', analysis_morphologicus_en: 'Personal pronoun: nominative 1st person singular.', analysis_morphologicus: 'Pronombre personal: nominativo 1ª persona singular.', analysis_morphologicus_zh: '人稱代名詞：主格、第一人稱、單數。', significationes: { en: 'I', es: 'yo', zh: '我' } },
                        { id_verbi: 'v6_4', terminus: 'σαφῶς', analysis_morphologicus_en: 'Adverb of manner.', analysis_morphologicus: 'Adverbio de modo.', analysis_morphologicus_zh: '情狀副詞。', significationes: { en: 'clearly', es: 'claramente', zh: '清楚地' } },
                        { id_verbi: 'v6_5', terminus: 'οἶδα', analysis_morphologicus_en: 'Verb: 1st person singular, perfect active indicative from οἶδα.', analysis_morphologicus: 'Verbo: 1ª persona del singular del perfecto de indicativo activo de οἶδα.', analysis_morphologicus_zh: '動詞：完成時、直陳語氣、主動語態、第一人稱單數，來自 οἶδα。', significationes: { en: 'I know', es: 'sé', zh: '知道' } },
                        { id_verbi: 'v6_6', terminus: 'κολοιός,', analysis_morphologicus_en: 'Noun: nominative masculine singular (predicate with "to be" elided).', analysis_morphologicus: 'Sustantivo: nominativo masculino singular (atributo con verbo ser elidido).', analysis_morphologicus_zh: '名詞：主格、陽性、單數 (省略動詞 είναι 的表語)。', significationes: { en: 'a jackdaw', es: 'un grajo', zh: '一隻寒鴉' } },
                        { id_verbi: 'v6_7', terminus: 'αὐτὸς', analysis_morphologicus_en: 'Personal pronoun (intensive): nominative masculine singular.', analysis_morphologicus: 'Pronombre personal (intensivo): nominativo masculino singular.', analysis_morphologicus_zh: '人稱代名詞 (強調)：主格、陽性、單數。', significationes: { en: 'he himself', es: 'él mismo', zh: '牠自己' } },
                        { id_verbi: 'v6_8', terminus: 'βούλεται', analysis_morphologicus_en: 'Verb: 3rd person singular, present middle indicative from βούλομαι.', analysis_morphologicus: 'Verbo: 3ª persona del singular del presente de indicativo medio de βούλομαι.', analysis_morphologicus_zh: '動詞：現在時、直陳語氣、中間語態、第三人稱單數，來自 βούλομαι。', significationes: { en: 'he wishes, he wants', es: 'quiere, desea', zh: '想要' } },
                        { id_verbi: 'v6_9', terminus: 'ἀετός.', analysis_morphologicus_en: 'Noun: nominative masculine singular (predicate with "to be" elided).', analysis_morphologicus: 'Sustantivo: nominativo masculino singular (atributo con verbo ser elidido).', analysis_morphologicus_zh: '名詞：主格、陽性、單數 (省略動詞 είναι 的表語)。', significationes: { en: 'an eagle', es: 'un águila', zh: '一隻老鷹' } }
                    ]
                },
                {
                    id_orationis: 'o7',
                    textus_latinus: "οὕτως ἡ πρὸς τοὺς ὑπερέχοντας ἅμιλλα πρὸς τῷ μηδὲν ἀνύειν καὶ ἐπὶ συμφοραῖς προσκτᾶται γέλωτα.",
                    translationes: { 
                        en: '<strong>English (Moral)</strong>: Thus, rivalry against those who are superior, in addition to accomplishing nothing, also earns ridicule in the midst of misfortune.',
                        es: '<strong>Español (Moraleja)</strong>: Así la rivalidad contra los que son superiores, además de no lograr nada, también se gana la burla en medio de las desgracias.', 
                        zh: '<strong>中文（繁體）寓意</strong>: 同樣地，與比自己強大的人競爭，不僅一無所獲，還會在不幸中招來嘲笑。'
                    },
                    verba: [
                        { id_verbi: 'v7_1', terminus: 'οὕτως', analysis_morphologicus_en: 'Adverb.', analysis_morphologicus: 'Adverbio.', analysis_morphologicus_zh: '副詞。', significationes: { en: 'thus, in this way', es: 'así, de este modo', zh: '如此' } },
                        { id_verbi: 'v7_2', terminus: 'ἡ', analysis_morphologicus_en: 'Article: nominative feminine singular.', analysis_morphologicus: 'Artículo: nominativo femenino singular.', analysis_morphologicus_zh: '冠詞：主格、陰性、單數。', significationes: { en: 'the', es: 'la', zh: '這個' } },
                        { id_verbi: 'v7_3', terminus: 'πρὸς', analysis_morphologicus_en: 'Preposition (takes acc. / dat.).', analysis_morphologicus: 'Preposición de acusativo / dativo.', analysis_morphologicus_zh: '介詞（搭配賓格/與格）。', significationes: { en: 'against / in addition to', es: 'contra / además de', zh: '對抗 / 除了...之外' } },
                        { id_verbi: 'v7_4', terminus: 'ὑπερέχοντας', analysis_morphologicus_en: 'Present active participle (substantive): accusative masculine plural from ὑπερέχω.', analysis_morphologicus: 'Participio de presente activo sustantivado: acusativo masculino plural de ὑπερέχω.', analysis_morphologicus_zh: '現在時主動分詞(名詞化)：賓格、陽性、複數，來自 ὑπερέχω。', significationes: { en: 'those who are superior', es: 'los que son superiores', zh: '優越者' } },
                        { id_verbi: 'v7_5', terminus: 'ἅμιλλα', analysis_morphologicus_en: 'Noun: nominative feminine singular.', analysis_morphologicus: 'Sustantivo: nominativo femenino singular.', analysis_morphologicus_zh: '名詞：主格、陰性、單數。', significationes: { en: 'rivalry, competition', es: 'rivalidad', zh: '競爭' } },
                        { id_verbi: 'v7_6', terminus: 'τῷ', analysis_morphologicus_en: 'Article: dative neuter singular.', analysis_morphologicus: 'Artículo: dativo neutro singular.', analysis_morphologicus_zh: '冠詞：與格、中性、單數。', significationes: { en: 'to the (act of)', es: 'al', zh: '在...' } },
                        { id_verbi: 'v7_7', terminus: 'ἀνύειν', analysis_morphologicus_en: 'Present active infinitive (substantive) from ἀνύω.', analysis_morphologicus: 'Infinitivo de presente activo sustantivado de ἀνύω.', analysis_morphologicus_zh: '現在時主動不定式(名詞化)，來自 ἀνύω。', significationes: { en: 'to accomplish', es: 'lograr, conseguir', zh: '完成' } },
                        { id_verbi: 'v7_8', terminus: 'μηδὲν', analysis_morphologicus_en: 'Indefinite pronoun: accusative neuter singular.', analysis_morphologicus: 'Pronombre indefinido: acusativo neutro singular.', analysis_morphologicus_zh: '不定代名詞：賓格、中性、單數。', significationes: { en: 'nothing', es: 'nada', zh: '什麼都沒有' } },
                        { id_verbi: 'v7_9', terminus: 'καὶ', analysis_morphologicus_en: 'Adverb.', analysis_morphologicus: 'Adverbio.', analysis_morphologicus_zh: '副詞。', significationes: { en: 'also', es: 'también', zh: '也' } },
                        { id_verbi: 'v7_10', terminus: 'ἐπὶ', analysis_morphologicus_en: 'Preposition (takes dative).', analysis_morphologicus: 'Preposición de dativo.', analysis_morphologicus_zh: '介詞（搭配與格）。', significationes: { en: 'in circumstances of', es: 'en medio de', zh: '在...之上' } },
                        { id_verbi: 'v7_11', terminus: 'συμφοραῖς', analysis_morphologicus_en: 'Noun: dative feminine plural.', analysis_morphologicus: 'Sustantivo: dativo femenino plural.', analysis_morphologicus_zh: '名詞：與格、陰性、複數。', significationes: { en: 'misfortunes', es: 'desgracias', zh: '不幸' } },
                        { id_verbi: 'v7_12', terminus: 'προσκτᾶται', analysis_morphologicus_en: 'Verb: 3rd person singular, present middle indicative from προσκτάομαι.', analysis_morphologicus: 'Verbo: 3ª persona del singular del presente de indicativo medio de προσκτάομαι.', analysis_morphologicus_zh: '動詞：現在時、直陳語氣、中間語態、第三人稱單數，來自 προσκτάομαι。', significationes: { en: 'acquires in addition, earns', es: 'gana además, adquiere', zh: '額外獲得' } },
                        { id_verbi: 'v7_13', terminus: 'γέλωτα', analysis_morphologicus_en: 'Noun: accusative masculine singular.', analysis_morphologicus: 'Sustantivo: acusativo masculino singular.', analysis_morphologicus_zh: '名詞：賓格、陽性、單數。', significationes: { en: 'laughter, ridicule', es: 'risa, burla', zh: '嘲笑' } }
                    ]
                }
            ]
        };
        // =========================================================================================
        // === FIN DE LA ZONA DE DATOS ===
        // =========================================================================================

        const paragrafusContentus = document.getElementById('paragrafus-contentus');
        const marginaliaContentus = document.getElementById('marginalia-contentus');
        const languageSwitcher = document.getElementById('language-switcher');

        let idiomaActivo = 'en'; // 'en', 'es', o 'zh'
        let activumVerbum = null;
        let activaOratio = null;

        const langConfig = {
            en: {
                analysisTitle: 'Morphological Analysis',
                translationTitle: 'Sentence Translation',
                selectWordText: 'Select a word to see its analysis.',
                meaningLabel: 'Meaning',
                analysisKey: 'analysis_morphologicus_en',
                significationKey: 'en',
                translationKey: 'en'
            },
            es: {
                analysisTitle: 'Análisis Morfológico',
                translationTitle: 'Traducción de la Frase',
                selectWordText: 'Seleccione una palabra para ver su análisis.',
                meaningLabel: 'Significado',
                analysisKey: 'analysis_morphologicus',
                significationKey: 'es',
                translationKey: 'es'
            },
            zh: {
                analysisTitle: '詞法分析',
                translationTitle: '句子翻譯',
                selectWordText: '請選取一個單字以查看其分析。',
                meaningLabel: '意義',
                analysisKey: 'analysis_morphologicus_zh',
                significationKey: 'zh',
                translationKey: 'zh'
            }
        };

        function reddeParagrafum() {
            let fullText = paragrafus.orationes.map(o => o.textus_latinus).join(' ');
            let allVerba = paragrafus.orationes.flatMap(o => o.verba.map(v => ({...v, oratioId: o.id_orationis})));

            allVerba.sort((a,b) => b.terminus.length - a.terminus.length);

            allVerba.forEach(verbum => {
                const regex = new RegExp(`(${verbum.terminus.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')})(?![^<]*?>|[^<>]*?<\/)`, 'g');
                const replacement = `<span class="verbum" data-verbum-id="${verbum.id_verbi}" data-oratio-id="${verbum.oratioId}">$1</span>`;
                fullText = fullText.replace(regex, replacement);
            });

            paragrafusContentus.innerHTML = fullText;
        }
        
        function actualizaMarginalia() {
            let htmlContentus = '';
            const config = langConfig[idiomaActivo];

            // Sección de Análisis Morfológico
            htmlContentus += `<section id="analysis-morphologicus-section" class="mb-6"><h3 class="text-xl font-semibold text-gray-800 mb-4">${config.analysisTitle}</h3>`;
            
            if (activumVerbum) {
                const analysisText = activumVerbum[config.analysisKey];
                const meaningText = activumVerbum.significationes[config.significationKey];
                
                htmlContentus += `
                    <h4 class="text-2xl textum-classicum text-gray-800 mb-4">${activumVerbum.terminus}</h4>
                    <div class="space-y-4">
                        <div>
                            <p class="text-gray-700 mt-1">${analysisText}</p>
                            <p class="text-gray-700 mt-1"><strong>${config.meaningLabel}:</strong> ${meaningText}</p>
                        </div>
                    </div>`;
            } else {
                htmlContentus += `<div class="p-4 bg-stone-200 rounded-md text-gray-600"><p>${config.selectWordText}</p></div>`;
            }
            htmlContentus += `</section>`;

            // Sección de Traducción de la Frase
            if (activaOratio) {
                const translationText = activaOratio.translationes[config.translationKey];
                
                htmlContentus += `
                    <hr class="border-stone-300 my-6">
                    <section id="analysis-orationis-section">
                        <h3 class="text-xl font-semibold text-gray-800 mb-4">${config.translationTitle}</h3>
                        <div class="space-y-3">
                            <p class="text-gray-800 textum-classicum bg-stone-200 p-3 rounded-md">${activaOratio.textus_latinus}</p>
                            <div class="text-gray-700 mt-2">${translationText}</div>
                        </div>
                    </section>`;
            }
            
            marginaliaContentus.innerHTML = htmlContentus;
        }

        paragrafusContentus.addEventListener('click', (e) => {
            const verbumTarget = e.target.closest('.verbum');
            if (!verbumTarget) {
                if (!e.target.closest('#marginalia-sinistra')) {
                    document.querySelectorAll('.activus').forEach(el => el.classList.remove('activus'));
                    activumVerbum = null;
                    activaOratio = null;
                    actualizaMarginalia();
                }
                return;
            }

            const isAlreadyActive = verbumTarget.classList.contains('activus');
            document.querySelectorAll('.activus').forEach(el => el.classList.remove('activus'));
            if (isAlreadyActive) {
                activumVerbum = null;
                activaOratio = null;
                actualizaMarginalia();
                return;
            }

            const verbumId = verbumTarget.dataset.verbumId;
            const oratioId = verbumTarget.dataset.oratioId;
            activaOratio = paragrafus.orationes.find(o => o.id_orationis === oratioId);
            if (activaOratio) {
                activumVerbum = activaOratio.verba.find(v => v.id_verbi === verbumId);
            }
            verbumTarget.classList.add('activus');
            actualizaMarginalia();
        });

        languageSwitcher.addEventListener('click', (e) => {
            const targetBtn = e.target.closest('.lang-btn');
            if (!targetBtn) return;
            
            const newLang = targetBtn.dataset.lang;
            if (newLang === idiomaActivo) return;
            
            idiomaActivo = newLang;
            
            languageSwitcher.querySelector('.active-lang').classList.remove('active-lang');
            targetBtn.classList.add('active-lang');
            
            actualizaMarginalia();
        });

        reddeParagrafum();
        actualizaMarginalia();
    });
    </script>
</body>
</html>
